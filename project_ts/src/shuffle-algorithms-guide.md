# æ´—ç‰Œç®—æ³•å®Œå…¨æŒ‡å—

## ğŸ° ä»€ä¹ˆæ˜¯æ´—ç‰Œç®—æ³•ï¼Ÿ

æ´—ç‰Œç®—æ³•ç”¨äºéšæœºæ‰“ä¹±æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œç¡®ä¿æ¯ä¸ªæ’åˆ—å‡ºç°çš„æ¦‚ç‡ç›¸ç­‰ã€‚è¿™åœ¨æ¸¸æˆå¼€å‘ã€æ¨¡æ‹Ÿå®éªŒã€æœºå™¨å­¦ä¹ æ•°æ®é¢„å¤„ç†ç­‰é¢†åŸŸéƒ½æœ‰é‡è¦åº”ç”¨ã€‚

## ğŸ“Š æ´—ç‰Œç®—æ³•å¤æ‚åº¦å¯¹æ¯”

| ç®—æ³•åç§°              | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ­£ç¡®æ€§ä¿è¯ | æ¨èæŒ‡æ•° |
|----------------------|-----------|-----------|-----------|---------|
| **Fisher-Yates æ´—ç‰Œ** | O(n)      | O(1)      | âœ… å®Œç¾   | â­â­â­â­â­ |
| Knuth æ´—ç‰Œ          | O(n)      | O(1)      | âœ… å®Œç¾   | â­â­â­â­â­ |
| æœ´ç´ æ´—ç‰Œ            | O(nÂ²)     | O(n)      | âŒ æœ‰å   | â­â­     |
| æ’åºæ´—ç‰Œ            | O(n log n)| O(n)      | âŒ æœ‰å   | â­      |
| éšæœºäº¤æ¢æ´—ç‰Œ        | O(kÃ—n)    | O(1)      | âŒ æœ‰å   | â­â­     |

## ğŸ”¬ ç®—æ³•è¯¦è§£

### 1. Fisher-Yates æ´—ç‰Œç®—æ³• â­â­â­â­â­

#### æ ¸å¿ƒæ€æƒ³
ä»æ•°ç»„æœ«å°¾å¼€å§‹ï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªä½ç½®ä¸å½“å‰ä½ç½®äº¤æ¢ã€‚

#### ä»£ç å®ç°
```typescript
function fisherYatesShuffle<T>(arr: T[]): T[] {
  const result = [...arr];

  for (let i = result.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [result[i], result[j]] = [result[j], result[i]];
  }

  return result;
}
```

#### ä¼˜åŠ¿
- âœ… æ—¶é—´å¤æ‚åº¦ O(n)
- âœ… ç©ºé—´å¤æ‚åº¦ O(1)ï¼ˆä¸ä¿®æ”¹åŸæ•°ç»„ï¼‰
- âœ… ä¿è¯æ¯ä¸ªæ’åˆ—æ¦‚ç‡å®Œå…¨ç›¸ç­‰
- âœ… å®ç°ç®€å•ï¼Œæ€§èƒ½ä¼˜ç§€

#### æµ‹è¯•ç»“æœ
```
æ­£ç¡®æ€§: âœ…
å‡åŒ€æ€§å¾—åˆ†: 100.0%
æ€§èƒ½: 0.0006ms (å¹³å‡)
```

### 2. Knuth æ´—ç‰Œç®—æ³• â­â­â­â­â­

#### æ ¸å¿ƒæ€æƒ³
Fisher-Yates æ´—ç‰Œç®—æ³•çš„åˆ«åï¼Œç”± Donald Knuth åœ¨ã€Šè®¡ç®—æœºç¨‹åºè®¾è®¡è‰ºæœ¯ã€‹ä¸­æè¿°ã€‚

#### ç‰¹ç‚¹
- ä¸ Fisher-Yates ç®—æ³•å®Œå…¨ç›¸åŒ
- ç†è®ºåŸºç¡€æ›´å®Œå–„
- å¸¸ç”¨äºå­¦æœ¯å’Œå·¥ä¸šåº”ç”¨

### 3. æœ´ç´ æ´—ç‰Œç®—æ³• â­â­

#### æ ¸å¿ƒæ€æƒ³
éšæœºä»åŸæ•°ç»„ä¸­é€‰æ‹©å…ƒç´ æ”¾å…¥æ–°æ•°ç»„ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½è¢«é€‰ä¸­ã€‚

#### ä»£ç å®ç°
```typescript
function naiveShuffle<T>(arr: T[]): T[] {
  const result: T[] = [];
  const temp = [...arr];

  while (temp.length > 0) {
    const randomIndex = Math.floor(Math.random() * temp.length);
    result.push(temp[randomIndex]);
    temp.splice(randomIndex, 1);
  }

  return result;
}
```

#### é—®é¢˜
- âŒ æ—¶é—´å¤æ‚åº¦ O(nÂ²)ï¼Œæ•ˆç‡ä½ä¸‹
- âŒ ç©ºé—´å¤æ‚åº¦ O(n)ï¼Œéœ€è¦é¢å¤–ç©ºé—´
- âŒ æŸäº›æƒ…å†µä¸‹åˆ†å¸ƒä¸å‡åŒ€

#### æµ‹è¯•ç»“æœ
```
æ­£ç¡®æ€§: âŒ
å‡åŒ€æ€§å¾—åˆ†: 100.0%
æ€§èƒ½: 0.2018ms (å¹³å‡) - æ¯” Fisher-Yates æ…¢ 8 å€
```

### 4. æ’åºæ´—ç‰Œç®—æ³• â­

#### æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨ `Array.sort()` å¹¶ä¼ å…¥éšæœºæ¯”è¾ƒå‡½æ•°ã€‚

#### ä»£ç å®ç°
```typescript
function sortShuffle<T>(arr: T[]): T[] {
  return [...arr].sort(() => Math.random() - 0.5);
}
```

#### é—®é¢˜
- âŒ ä¾èµ–äºæ’åºç®—æ³•çš„å…·ä½“å®ç°
- âŒ åœ¨æŸäº› JavaScript å¼•æ“ä¸­åˆ†å¸ƒä¸å‡åŒ€
- âŒ æ—¶é—´å¤æ‚åº¦ O(n log n)

#### æµ‹è¯•ç»“æœ
```
æ­£ç¡®æ€§: âŒ
å‡åŒ€æ€§å¾—åˆ†: 99.9%
æ€§èƒ½: 0.3972ms (å¹³å‡) - æœ€æ…¢çš„ç®—æ³•
```

### 5. éšæœºäº¤æ¢æ´—ç‰Œ â­â­

#### æ ¸å¿ƒæ€æƒ³
éšæœºé€‰æ‹©ä¸¤ä¸ªä½ç½®è¿›è¡Œäº¤æ¢ï¼Œé‡å¤å¤šæ¬¡ã€‚

#### ä»£ç å®ç°
```typescript
function randomSwapShuffle<T>(arr: T[], iterations?: number): T[] {
  const result = [...arr];
  const n = result.length;
  const swapCount = iterations || n;

  for (let i = 0; i < swapCount; i++) {
    const idx1 = Math.floor(Math.random() * n);
    const idx2 = Math.floor(Math.random() * n);
    [result[idx1], result[idx2]] = [result[idx2], result[idx1]];
  }

  return result;
}
```

#### ç‰¹ç‚¹
- âœ… ç©ºé—´å¤æ‚åº¦ O(1)
- âŒ ä¸èƒ½ä¿è¯æ¯ä¸ªæ’åˆ—æ¦‚ç‡ç›¸ç­‰
- âŒ éœ€è¦å¤šæ¬¡è¿­ä»£æ‰èƒ½æ¥è¿‘å‡åŒ€åˆ†å¸ƒ

## ğŸ“ˆ å®é™…æµ‹è¯•å¯¹æ¯”

### æ’åˆ—åˆ†å¸ƒæµ‹è¯• (æ•°ç»„ [1,2,3])

| æ’åˆ— | Fisher-Yates | æœ´ç´ æ´—ç‰Œ | ç†æƒ³åˆ†å¸ƒ |
|------|-------------|---------|---------|
| [1,2,3] | 17.2% | 16.4% | 16.7% |
| [1,3,2] | 16.6% | 16.9% | 16.7% |
| [2,1,3] | 16.0% | 16.7% | 16.7% |
| [2,3,1] | 16.9% | 16.1% | 16.7% |
| [3,1,2] | 17.0% | 17.9% | 16.7% |
| [3,2,1] | 16.3% | 16.1% | 16.7% |

### æ€§èƒ½æµ‹è¯• (1000 å…ƒç´ æ•°ç»„)

| ç®—æ³• | å¹³å‡æ—¶é—´ | æœ€å¿«æ—¶é—´ | æœ€æ…¢æ—¶é—´ |
|------|---------|---------|---------|
| Fisher-Yates | 0.0241ms | 0.0175ms | 0.2572ms |
| æœ´ç´ æ´—ç‰Œ | 0.2018ms | 0.0921ms | 2.7160ms |
| æ’åºæ´—ç‰Œ | 0.3972ms | 0.2682ms | 2.6421ms |

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ¨èåœºæ™¯

#### ğŸ† é€šç”¨åº”ç”¨
```typescript
// ä½¿ç”¨ Fisher-Yates æ´—ç‰Œ
const shuffled = fisherYatesShuffle(myArray);
```

#### ğŸ® æ¸¸æˆå¼€å‘
```typescript
// æ´—ç‰Œæ‰‘å…‹ç‰Œ
const deck = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
const shuffledDeck = fisherYatesShuffle(deck);
```

#### ğŸ”¬ ç§‘å­¦è®¡ç®—
```typescript
// æ•°æ®éšæœºåŒ–
const dataset = fisherYatesShuffle(originalData);
```

#### ğŸ’¾ å†…å­˜å—é™ç¯å¢ƒ
```typescript
// å°±åœ°æ´—ç‰Œï¼Œä¸åˆ›å»ºæ–°æ•°ç»„
fisherYatesShuffleInPlace(myArray);
```

### é¿å…ä½¿ç”¨çš„åœºæ™¯

#### âŒ å¤§æ•°æ®é›†
```typescript
// ä¸è¦ä½¿ç”¨æœ´ç´ æ´—ç‰Œå¤„ç†å¤§æ•°æ®
// naiveShuffle(largeArray); // O(nÂ²) æ•ˆç‡ä½ä¸‹
```

#### âŒ éœ€è¦ç²¾ç¡®å‡åŒ€åˆ†å¸ƒçš„å­¦æœ¯ç ”ç©¶
```typescript
// ä¸è¦ä½¿ç”¨æ’åºæ´—ç‰Œè¿›è¡Œå­¦æœ¯ç ”ç©¶
// sortShuffle(data); // åˆ†å¸ƒä¸ä¿è¯å‡åŒ€
```

## ğŸ”§ å®ç”¨å·¥å…·å‡½æ•°

### éªŒè¯æ´—ç‰Œæ­£ç¡®æ€§
```typescript
const validation = validateShuffleCorrectness(fisherYatesShuffle, testArray, 1000);
console.log(`å‡åŒ€åˆ†å¸ƒ: ${validation.isUniform}`);
```

### æ€§èƒ½æµ‹è¯•
```typescript
const performance = performanceTestShuffle(fisherYatesShuffle, largeArray, 100);
console.log(`å¹³å‡æ—¶é—´: ${performance.averageTime}ms`);
```

### è®¡ç®—æ•°ç»„ç†µå€¼
```typescript
const entropy = calculateArrayEntropy(shuffledArray);
// ç†µå€¼è¶Šé«˜ï¼Œéšæœºæ€§è¶Šå¥½
```

## ğŸ§ª æµ‹è¯•å‘½ä»¤

```bash
# è¿è¡Œæ´—ç‰Œç®—æ³•æµ‹è¯•
npm run test-shuffle
```

## âœ… ç»“è®º

**Fisher-Yates æ´—ç‰Œç®—æ³•æ˜¯æ´—ç‰Œç®—æ³•çš„é»„é‡‘æ ‡å‡†**ï¼Œå®ƒï¼š

1. âœ… æä¾›ç†è®ºæœ€ä¼˜çš„ O(n) æ—¶é—´å¤æ‚åº¦
2. âœ… ä¿è¯æ¯ä¸ªæ’åˆ—å‡ºç°çš„æ¦‚ç‡å®Œå…¨ç›¸ç­‰
3. âœ… ç©ºé—´å¤æ‚åº¦ O(1)ï¼Œä¸æµªè´¹å†…å­˜
4. âœ… å®ç°ç®€å•ï¼Œæ€§èƒ½ä¼˜ç§€
5. âœ… é€‚ç”¨äºæ‰€æœ‰ç¼–ç¨‹è¯­è¨€å’Œç¯å¢ƒ

åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¦åˆ™éƒ½åº”è¯¥ä½¿ç”¨ Fisher-Yates æ´—ç‰Œç®—æ³•ã€‚
